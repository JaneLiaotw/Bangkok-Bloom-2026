<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Bangkok Itinerary | Map Fixed</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-3">
    <header class="mb-2 mt-2 px-2 animate-fadeInUp">
        <h2 class="fw-bold" style="letter-spacing: -1.5px;">Bangkok Saga</h2>
        <p class="text-soft small"><i class="fas fa-location-dot me-2"></i>100% 導航修正版</p>
    </header>

    <div class="day-scroller mb-4" id="dayPicker"></div>
    <div id="dayContent"></div>

    <nav class="bottom-nav">
        <a href="index.html"><i class="fas fa-house-chimney"></i><span>總覽</span></a>
        <a href="culture.html" class="active"><i class="fas fa-compass"></i><span>行程</span></a>
        <a href="guide.html"><i class="fas fa-feather-pointed"></i><span>指南</span></a>
    </nav>

    <script>
        const itineraryData = {
            1: { title: "抵達與奢華初體驗", weather: "32°C", icon: "fa-sun", outfit: "休閒正裝", eng: "Arrival", route: "BKK Airport ➟ Hotel", query: "InterContinental+Bangkok", dist: "機場接駁", time: "12:10 抵達", desc: "專車接送。下午享受行政酒廊下午茶。飯店旁即是 BTS Chit Lom。", spots: ["37樓行政酒廊", "四面佛參拜", "Central World", "飯店泳池", "Gaysorn Village"] },
            2: { title: "經典古蹟與河畔 (初一)", weather: "31°C", icon: "fa-cloud-sun", outfit: "長裙/長褲 (必備)", eng: "Heritage Day", route: "BTS + 船 ➟ 大皇宮", query: "The+Grand+Palace", dist: "Transit", time: "08:30 出發", desc: "搭 BTS 到 Saphan Taksin 2號出口轉橘旗船。下午跨河至鄭王廟。", spots: ["玉佛寺", "大皇宮", "鄭王廟", "南龍市場", "酒廊晚餐"] },
            3: { title: "飯店轉場與時尚購物", weather: "33°C", icon: "fa-bag-shopping", outfit: "舒適逛街服裝", eng: "Shopping", route: "步行 ➟ Grand Hyatt", query: "Grand+Hyatt+Erawan+Bangkok", dist: "0.2 km", time: "11:00 轉場", desc: "步行轉場。下午逛 Siam Paragon 商圈。", spots: ["Erawan Tea Room", "Siam Paragon", "Siam Center", "君悅酒廊", "四面佛"] },
            4: { title: "在地市場與河畔夜色", weather: "32°C", icon: "fa-shrimp", outfit: "輕便服飾", eng: "Market & Icon", route: "MRT ➟ 安多哥 ➟ ICONSIAM", query: "ICONSIAM", dist: "Transit", time: "09:30 出發", desc: "MRT Kamphaeng Phet 3號出口直達。傍晚往 ICONSIAM。", spots: ["安多哥市場", "Siam Square 船麵", "ICONSIAM 水舞", "室內水上市場", "高品質點心"] },
            5: { title: "最後採買與賦歸", weather: "31°C", icon: "fa-plane", outfit: "飛機裝", eng: "Farewell", route: "步行 ➟ Big C ➟ 機場", query: "Suvarnabhumi+Airport", dist: "專車接送", time: "11:30 出發", desc: "Big C Rajdamri 採買。11:30 專車前往機場。", spots: ["Big C 伴手禮", "飯店桑拿", "機場免稅店", "最後泰奶", "溫暖的家"] }
        };

        function renderDay(d) {
            const data = itineraryData[d];
            const content = document.getElementById('dayContent');
            // 修正導航格式：使用標準 Google Search Query 導航
            const navUrl = `https://www.google.com/maps/dir/?api=1&destination=${data.query}&travelmode=transit`;

            const spotsList = data.spots.map((s, i) => `<div class="spot-item"><div class="spot-num">${i + 1}</div><span>${s}</span></div>`).join('');

            content.innerHTML = `
                <div class="animate-fadeInUp">
                    <div class="hero-info shadow">
                        <div class="d-flex justify-content-between mb-3 small opacity-75">
                            <span class="badge bg-white text-dark">DAY ${d}</span>
                            <span><i class="fas fa-train blinking"></i> TRANSIT ACTIVE</span>
                        </div>
                        <div class="row align-items-end">
                            <div class="col-7">
                                <h3 class="fw-bold mb-1">${data.title}</h3>
                                <p class="small opacity-75 mb-3">${data.eng}</p>
                                <div class="d-flex"><span class="meta-badge">${data.dist}</span><span class="meta-badge">${data.time}</span></div>
                            </div>
                            <div class="col-5">
                                <div class="spotlight-box">
                                    <div class="fw-bold mb-2" style="font-size:0.6rem; color:#DAA520;">TOP SPOTS</div>
                                    ${spotsList}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="gear-card">
                        <div class="gear-weather"><i class="fas ${data.icon} mb-1" style="color: #DAA520;"></i><div class="fw-bold">${data.weather}</div></div>
                        <div class="gear-outfit"><div class="outfit-tag">Outfit</div><div class="small fw-bold">${data.outfit}</div></div>
                    </div>
                    
                    <div class="glass-card mb-3">
                        <h6 class="fw-bold"><i class="fas fa-route me-2 text-primary"></i>${data.route}</h6>
                        <p class="small text-muted mb-3">${data.desc}</p>
                        <a href="${navUrl}" target="_blank" class="nav-trigger"><i class="fas fa-location-arrow me-2"></i>導航至目的地</a>
                    </div>
                </div>`;
            localStorage.setItem('bangkok_last_day', d);
        }

        const picker = document.getElementById('dayPicker');
        for (let i = 1; i <= 5; i++) {
            const btn = document.createElement('div');
            btn.className = `day-btn day-id-${i}`;
            btn.innerText = i;
            btn.onclick = function() {
                document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active'); renderDay(i);
                this.scrollIntoView({ behavior: 'smooth', inline: 'center' });
            };
            picker.appendChild(btn);
        }
        renderDay(parseInt(localStorage.getItem('bangkok_last_day')) || 1);
        document.querySelector(`.day-id-${localStorage.getItem('bangkok_last_day') || 1}`).classList.add('active');
    </script>
</body>
</html>
